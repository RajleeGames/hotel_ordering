{% extends 'base.html' %}
{% load static %}
{% block title %}Menu{% endblock %}
{% block content %}
<!-- Page Title -->
<h1 class="mb-4 text-center">Our Menu</h1>

{% for category in categories %}
  <div class="mb-5">
    <h2 class="mb-3">{{ category.name }}</h2>
    <div class="row g-3">
      {% for item in food_items %}
        {% if item.category == category %}
        <div class="col-sm-6 col-md-4 col-lg-3">
          <div class="card h-100 shadow-sm animate__animated animate__fadeInUp">
            <div class="position-relative">
              {% if item.image %}
              <img src="{{ item.image.url }}" class="card-img-top img-fluid rounded-top" alt="{{ item.name }}">
              {% else %}
              <img src="https://via.placeholder.com/300x200?text=No+Image" class="card-img-top img-fluid rounded-top" alt="{{ item.name }}">
              {% endif %}
              <!-- Optional badge overlay -->
              <span class="badge bg-primary position-absolute top-0 start-0 m-2">New</span>
            </div>
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">{{ item.name }}</h5>
              <p class="card-text text-muted mb-3">Tsh{{ item.price }}</p>
              <!-- Optional: add a brief description -->
              <p class="card-text flex-grow-1">A short description goes here.</p>
              <!-- Quantity Form -->
              <form method="POST" action="{% url 'add_to_cart' item.id %}">
                {% csrf_token %}
                <div class="input-group mb-2">
                  <label class="input-group-text" for="quantity_{{ item.id }}">Qty</label>
                  <input 
                    type="number" 
                    name="quantity" 
                    id="quantity_{{ item.id }}" 
                    value="1" 
                    min="1" 
                    class="form-control" 
                    required
                  >
                </div>
                <button type="submit" class="btn btn-success w-100">Add to Cart</button>
              </form>
            </div>
          </div>
        </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
{% endfor %}
{% endblock %}
